function BASlider(e,t,r){var o,i=this;for(o in i.options={animate:!0,showLabels:!0,startingPosition:"50%",mode:"vertical",rendered:!1,wrapper:document.querySelector(e),setWrapperDimensions:function(){var e=t_beforeafter__calculateSizes(t_beforeafter__getStyledSize(this.wrapper).width,t_beforeafter__getStyledSize(this.wrapper).height,i);this.wrapper.style.height=parseInt(e.height)+"px",this.wrapper.style.width=parseInt(e.width)+"px"}},i.options)o in r&&(i.options[o]=r[o]);2===t.length?(i.imgBefore=new t_beforeafter__sliderImg(t[0],i),i.imgAfter=new t_beforeafter__sliderImg(t[1],i)):console.warn("The images parameter takes only two Image objects.")}function t_beforeafter__init(e){e.imgBefore&&!0===e.imgBefore.loaded&&e.imgAfter&&!0===e.imgAfter.loaded&&(t_beforeafter__createSliderMarkup(e),t_beforeafter__updateSlider(e.options.startingPosition,e),t_beforeafter__addedHandlers(e),window.beforeafter.sliders.push(e))}function t_beforeafter__sliderImg(e,t){var r=this;r.image=new Image,r.loaded=!1,r.image.onload=function(){r.loaded=!0,t_beforeafter__init(t)},r.image.src=e.src,r.image.alt=e.alt||"",r.label=e.label||!1}function t_beforeafter__createSliderMarkup(e){e.options.wrapper.classList.add("t-beforeafter"),e.options.wrapper.style.width=t_beforeafter__getImageSize(e.imgBefore.image).width,e.options.setWrapperDimensions();var t=e.options.mode,r=e.imgBefore.label?'<div class="t-beforeafter__label">'+e.imgBefore.label+"</div>":"",o=e.imgAfter.label?'<div class="t-beforeafter__label">'+e.imgAfter.label+"</div>":"",o='<div class="t-beforeafter__slider '+t+' "><div class="t-beforeafter__handle"><div class="t-beforeafter__arrow t-beforeafter__arrow_left"></div><div class="t-beforeafter__control"><div class="t-beforeafter__controller" tabindex="0"></div></div><div class="t-beforeafter__arrow t-beforeafter__arrow_right"></div></div><div class="t-beforeafter__image t-beforeafter__image_left">'+e.imgBefore.image.outerHTML+r+'</div><div class="t-beforeafter__image t-beforeafter__image_right">'+e.imgAfter.image.outerHTML+o+"</div></div>";e.options.wrapper.insertAdjacentHTML("beforeend",o),e.handle=e.options.wrapper.querySelector(".t-beforeafter__handle"),e.leftImage=e.options.wrapper.querySelector(".t-beforeafter__image_left"),e.rightImage=e.options.wrapper.querySelector(".t-beforeafter__image_right"),e.slider=e.options.wrapper.querySelector(".t-beforeafter__slider"),window.isMobile&&t_beforeafter__setMobilePanels(e)}function t_beforeafter__getImageSize(e){if(e.naturalWidth&&e.naturalHeight)return{width:e.naturalWidth,height:e.naturalHeight};var t=new Image;return t.src=e.src,{width:t.width,height:t.height}}function t_beforeafter__getImageAspect(e){e=t_beforeafter__getImageSize(e);return e.width/e.height}function t_beforeafter__setMobilePanels(e){e.leftMobileBlock=document.createElement("div"),e.leftMobileBlock.classList.add("t-beforeafter__mobile"),e.leftMobileBlock.classList.add("t-beforeafter__mobile_left"),e.rightMobileBlock=document.createElement("div"),e.rightMobileBlock.classList.add("t-beforeafter__mobile"),e.rightMobileBlock.classList.add("t-beforeafter__mobile_right"),e.options.wrapper.insertAdjacentElement("beforeend",e.leftMobileBlock),e.options.wrapper.insertAdjacentElement("beforeend",e.rightMobileBlock);var t,r,o,i=parseInt(e.options.startingPosition,10)/100;"vertical"===e.options.mode?(t=e.handle?e.handle.offsetHeight:0,r=e.slider.offsetHeight*i,o=e.slider.offsetHeight*(1-i),e.halfHandlerHeight=t/2,r=e.halfHandlerHeight>r?0:r-e.halfHandlerHeight,o=e.halfHandlerHeight>o?0:o-e.halfHandlerHeight,e.leftMobileBlock.style.height=r+"px",e.leftMobileBlock.style.width="100%",e.rightMobileBlock.style.top="auto",e.rightMobileBlock.style.bottom="0",e.rightMobileBlock.style.width="100%",e.rightMobileBlock.style.height=o+"px"):(r=e.handle?e.handle.offsetWidth:0,o=e.slider.offsetWidth*i,i=e.slider.offsetWidth*(1-i),e.halfHandlerWidth=r/2,o=e.halfHandlerWidth>o?0:o-e.halfHandlerWidth,i=e.halfHandlerWidth>i?0:i-e.halfHandlerWidth,e.leftMobileBlock.style.width=o+"px",e.rightMobileBlock.style.width=i+"px")}function t_beforeafter__getStyledSize(e){var t=e?e.offsetWidth||window.getComputedStyle(e).width:0,e=e?e.offsetHeight||window.getComputedStyle(e).height:0;return"string"==typeof t&&(t=parseInt(t,10)),"string"==typeof e&&(e=parseInt(e,10)),{width:t,height:e}}function t_beforeafter__getXCoord(e){e=e.pageX||(e.touches?e.touches[0].pageX:e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);return e}function t_beforeafter__getYCoord(e){e=e.pageY||(e.touches?e.touches[0].pageY:e.clientY+document.body.scrollTop+document.documentElement.scrollTop);return e}function t_beforeafter__getLeftPercent(e,t){var r=e.getBoundingClientRect(),r=(r.top,document.body.scrollTop,document.documentElement.scrollTop,r.left+document.body.scrollLeft+document.documentElement.scrollLeft);return(t_beforeafter__getXCoord(t)-r)/e.offsetWidth*100}function t_beforeafter__getTopPercent(e,t){var r=e.getBoundingClientRect(),o=r.top+document.body.scrollTop+document.documentElement.scrollTop;r.left,document.body.scrollLeft,document.documentElement.scrollLeft;return(t_beforeafter__getYCoord(t)-o)/e.offsetHeight*100}function t_beforeafter__addedHandlers(r){window.addEventListener("resize",t_throttle(function(){r.options.setWrapperDimensions()})),r.slider.addEventListener("mousedown",function(e){e.preventDefault(),t_beforeafter__updateSlider(e,r);var t=!0;this.addEventListener("mousemove",function(e){e.preventDefault(),t&&t_beforeafter__updateSlider(e,r)}),this.addEventListener("mouseup",function(e){e.preventDefault(),e.stopPropagation(),removeEventListener("mouseup",arguments.callee),t=!1})}),r.slider.addEventListener("touchstart",function(e){e.preventDefault(),e.stopPropagation(),t_beforeafter__updateSlider(e,r),this.addEventListener("touchmove",function(e){e.preventDefault(),e.stopPropagation(),t_beforeafter__updateSlider(e,r)}),this.addEventListener("touchend",function(){t_beforeafter__updateMobile(r),this.removeEventListener("touchend",arguments.callee)})}),r.handle.addEventListener("keydown",function(e){var t=e.which||e.keyCode;37===t&&"horizontal"===r.options.mode&&(e.preventDefault(),t_beforeafter__updateKeyboard(r,"left")),39===t&&"horizontal"===r.options.mode&&(e.preventDefault(),t_beforeafter__updateKeyboard(r,"right")),38===t&&"vertical"===r.options.mode&&(e.preventDefault(),t_beforeafter__updateKeyboard(r,"left")),40===t&&"vertical"===r.options.mode&&(e.preventDefault(),t_beforeafter__updateKeyboard(r,"right"))})}function t_beforeafter__updateMobile(e){var t,r;"vertical"===e.options.mode?(t=e.leftImage?e.leftImage.offsetHeight:0,r=e.rightImage?e.rightImage.offsetHeight:0,t=e.halfHandlerHeight>t?0:t-e.halfHandlerHeight,r=e.halfHandlerHeight>r?0:r-e.halfHandlerHeight,e.leftMobileBlock.style.height=t+"px",e.rightMobileBlock.style.height=r+"px"):(t=e.leftImage?e.leftImage.offsetWidth:0,r=e.rightImage?e.rightImage.offsetWidth:0,t=e.halfHandlerWidth>t?0:t-e.halfHandlerWidth,r=e.halfHandlerWidth>r?0:r-e.halfHandlerWidth,e.leftMobileBlock.style.width=t+"px",e.rightMobileBlock.style.width=r+"px")}function t_beforeafter__updateSlider(e,t){var r,o;t.options.rendered?r=("vertical"===t.options.mode?t_beforeafter__getTopPercent:t_beforeafter__getLeftPercent)(t.slider,e):(r=parseInt(e,10),t.options.rendered=!0),r=r.toFixed(2)+"%",e=100-(o=parseFloat(r))+"%",0<o&&o<100&&("vertical"===t.options.mode?(t.handle.style.top=r,t.leftImage.style.height=r,t.rightImage.style.height=e):(t.handle.style.left=r,t.leftImage.style.width=r,t.rightImage.style.width=e),t.sliderPosition=r)}function t_beforeafter__updateKeyboard(e,t){"left"===t?(e.sliderPosition=parseFloat(e.sliderPosition)-1+"%","horizontal"===e.options.mode?(e.handle.style.left=e.sliderPosition,e.leftImage.style.width=e.sliderPosition,e.rightImage.style.width=100-parseFloat(e.sliderPosition)+"%"):"vertical"===e.options.mode&&(e.handle.style.top=e.sliderPosition,e.leftImage.style.height=e.sliderPosition,e.rightImage.style.height=100-parseFloat(e.sliderPosition)+"%")):"right"===t&&(e.sliderPosition=parseFloat(e.sliderPosition)+1+"%","horizontal"===e.options.mode?(e.handle.style.left=e.sliderPosition,e.leftImage.style.width=e.sliderPosition,e.rightImage.style.width=100-parseFloat(e.sliderPosition)+"%"):"vertical"===e.options.mode&&(e.handle.style.top=e.sliderPosition,e.leftImage.style.height=e.sliderPosition,e.rightImage.style.height=100-parseFloat(e.sliderPosition)+"%"))}function t_beforeafter__calculateSizes(e,t,r){var o={};return o.ratio=t_beforeafter__getImageAspect(r.imgBefore.image),e?o.height=e/o.ratio:t&&(o.width=t*o.ratio),o}window.beforeafter={sliders:[]},window.beforeafter.BASlider=BASlider;